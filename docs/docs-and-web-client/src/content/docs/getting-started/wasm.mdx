---
title: Web Assembly
description: Web Assembly module usage
sidebar:
  order: 5
---
---

import { Tabs, TabItem } from '@astrojs/starlight/components';
import { Code } from '@astrojs/starlight/components';
import { LinkCard } from '@astrojs/starlight/components';
import { Aside } from '@astrojs/starlight/components';

Lipi Lekhika includes a blazing-fast ü¶Ä **Rust-based WebAssembly (WASM) module** that brings high-performance transliteration to all JavaScript environments. The WASM implementation provides significant performance improvements while maintaining the same easy-to-use API.

## Features

The WASM module offers several advantages over the pure JavaScript implementation:

- **‚ö° Superior Performance** ‚Äî Rust's compiled WASM code executes significantly faster than JavaScript
- **üì¶ Compact Size** ‚Äî Only 142 KB gzipped, including all script data embedded
- **üåç Universal Compatibility** ‚Äî Works seamlessly in Node.js, browsers, Deno, Bun, and more
- **üîí Type Safety** ‚Äî Built with Rust's type system for reliability
- **üéØ Same API** ‚Äî Drop-in replacement for the standard `transliterate` function

## Installation

The WASM module is included in the main `lipilekhika` package ‚Äî no additional installation required!

<Tabs>
  <TabItem label="npm" icon="npm">
    ```bash
    npm install lipilekhika
    ```
  </TabItem>
  <TabItem label="pnpm" icon="pnpm">
    ```bash
    pnpm add lipilekhika
    ```
  </TabItem>
  <TabItem label="bun" icon="bun">
    ```bash
    bun add lipilekhika
    ```
  </TabItem>
  <TabItem label="yarn" icon="seti:yarn">
    ```bash
    yarn add lipilekhika
    ```
  </TabItem>
</Tabs>

## Basic Usage

### Simple Transliteration

The `transliterate_wasm` function provides the same interface as the standard `transliterate` function:

```typescript
import { transliterate_wasm } from 'lipilekhika';

const result = await transliterate_wasm('na jAyatE mriyatE vA', 'Normal', 'Devanagari');
console.log(result); // ‡§® ‡§ú‡§æ‡§Ø‡§§‡•á ‡§Æ‡•ç‡§∞‡§ø‡§Ø‡§§‡•á ‡§µ‡§æ
```

### With Custom Options

You can pass custom transliteration options just like the standard function:

```typescript
import { transliterate_wasm } from 'lipilekhika';

const result = await transliterate_wasm(
  '‡∞ó‡∞Ç‡∞ó‡∞æ',
  'Telugu',
  'Gujarati',
  { 'brahmic_to_brahmic:replace_pancham_varga_varna_with_anusvAra': true }
);
console.log(result); // ‡™ó‡™Ç‡™ó‡™æ (instead of ‡™ó‡™ô‡´ç‡™ó‡™æ)
```

<LinkCard
  title="Custom Transliteration Options"
  href="/reference/custom_trans_options"
  description="A detailed overview of all available custom transliteration options"
/>

## Preloading the WASM Module

To avoid the initial loading delay when first calling `transliterate_wasm`, you can preload the WASM module:

```typescript
import { preloadWasm, transliterate_wasm } from 'lipilekhika';

// Preload during app initialization
await preloadWasm();

// Later calls will be instant (no loading delay)
const result = await transliterate_wasm('namaste', 'Normal', 'Devanagari');
console.log(result); // ‡§®‡§Æ‡§∏‡•ç‡§§‡•á
```

<Aside type="tip">
  **Best Practice**: Call `preloadWasm()` during your application's initialization phase (e.g., in a loader, startup hook, or top-level await) to ensure the WASM module is ready before users interact with transliteration features.
</Aside>

## API Reference

### `transliterate_wasm(text, from, to, options?)`

WASM-based transliteration using the Rust implementation.

**Parameters:**
- `text: string` ‚Äî Text to transliterate
- `from: ScriptLangType` ‚Äî Source script/language name
- `to: ScriptLangType` ‚Äî Target script/language name
- `options?: TransliterationOptions` ‚Äî Optional custom transliteration options

**Returns:** `Promise<string>` ‚Äî The transliterated text

**Example:**
```typescript
const result = await transliterate_wasm('hello', 'Normal', 'Telugu');
console.log(result); // ‡∞π‡±Ü‡∞≤‡±ç‡∞≤‡±ä
```

### `preloadWasm()`

Preloads the WASM module to eliminate initial loading delay.

**Returns:** `Promise<void>`

**Example:**
```typescript
// During app initialization
await preloadWasm();

// Now WASM calls are instant
const result = await transliterate_wasm('text', 'Normal', 'Devanagari');
```

## Performance Comparison

The WASM implementation provides significant performance improvements, especially for:

- **Large text blocks** ‚Äî Faster processing of lengthy documents
- **Batch operations** ‚Äî Efficient when transliterating multiple texts
- **Complex scripts** ‚Äî Better performance with intricate character mappings
- **Repeated calls** ‚Äî Lower overhead after initial load

<Aside type="note">
  For small, one-off transliterations, the performance difference may be negligible due to WASM initialization overhead. The WASM module shines with repeated use or larger text processing.
</Aside>

## Cross-Environment Support

The WASM module works seamlessly across all JavaScript environments:

### Node.js

```javascript
import { transliterate_wasm } from 'lipilekhika';

const result = await transliterate_wasm('text', 'Normal', 'Devanagari');
console.log(result);
```

### Browser (ESM)

```html
<script type="module">
  import { transliterate_wasm } from 'https://cdn.jsdelivr.net/npm/lipilekhika/dist/esm/index.mjs';
  
  const text = await transliterate_wasm('namaste', 'Normal', 'Devanagari');
  console.log(text); // ‡§®‡§Æ‡§∏‡•ç‡§§‡•á
</script>
```

### Deno

```typescript
import { transliterate_wasm } from 'npm:lipilekhika';

const result = await transliterate_wasm('text', 'Normal', 'Devanagari');
console.log(result);
```

### Bun

```typescript
import { transliterate_wasm } from 'lipilekhika';

const result = await transliterate_wasm('text', 'Normal', 'Devanagari');
console.log(result);
```

## When to Use WASM vs JavaScript

**Use WASM (`transliterate_wasm`) when:**
- Processing large volumes of text
- Performance is critical
- You're making repeated transliteration calls
- Building production applications

**Use JavaScript (`transliterate`) when:**
- Making occasional, small transliterations
- Bundle size is extremely constrained
- You need maximum compatibility with older environments
- Debugging or development (easier stack traces)

## Bundle Size

The WASM module adds only **142 KB (gzipped)** to your bundle, which includes:
- The compiled Rust WASM binary
- All script data embedded (no external data files needed)
- Complete transliteration logic

This is remarkably compact considering it includes all the data and logic for 15+ scripts!

## Technical Details

### How It Works

1. The WASM module is compiled from the Rust implementation of Lipi Lekhika
2. All script data is embedded directly into the WASM binary at compile time
3. The module is lazy-loaded on first use (or via `preloadWasm()`)
4. Subsequent calls reuse the loaded module for optimal performance

### Browser Compatibility

The WASM module requires WebAssembly support, which is available in:
- Chrome/Edge 57+
- Firefox 52+
- Safari 11+
- Node.js 8+
- Deno (all versions)
- Bun (all versions)

<Aside type="caution">
  Very old browsers (IE11, old mobile browsers) do not support WebAssembly. For maximum compatibility, fall back to the standard `transliterate` function or use feature detection.
</Aside>

## Additional Resources

<LinkCard
  title="JavaScript Guide"
  href="/getting-started/javascript"
  description="Complete guide for using Lipi Lekhika in JavaScript/TypeScript"
/>
<LinkCard
  title="Rust Package"
  href="/getting-started/rust"
  description="Learn about the native Rust implementation"
/>
<LinkCard
  title="Supported Scripts"
  href="/reference/supported_scripts"
  description="List of all supported scripts/languages and their aliases"
/>
